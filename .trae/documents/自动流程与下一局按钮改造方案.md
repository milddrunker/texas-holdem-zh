## 目标
- 移除“下一阶段”按钮与相关事件，保持完全自动的阶段推进。
- 新增“开启下一局”按钮：在所有非观战玩家已准备时，开始新一局；否则给出错误提示。
- 分析并修复倒计时（60s）逻辑：阶段切换后应重置并广播新的倒计时；当前玩家切换时倒计时应准确更新。

## 现状与问题
- 仍存在 `socket.on('nextStage')`（`server.js:292-294`），UI也保留“下一阶段”按钮与文案（`public/index.html:198-206`），与自动流程冲突。
- 倒计时只在开局 `startGameIfReady()` 与 `advanceTurn()` 内设置 `turnExpireAt`，但在 `nextStage()` 阶段变更后未设置新的 `turnExpireAt`（`server.js:188-220`），导致新阶段第一行动的倒计时缺失或显示错误。

## 改造方案
- 服务端
  - 删除 `socket.on('nextStage')` 事件。
  - 新增 `socket.on('startNextHand')`：
    - 检查所有 `role === 'player'` 的玩家是否 `ready === true`；允许 `spectator` 不参与检查。
    - 将桌面状态重置为 `idle`（清空 `communityCards/currentBet/totalCommitted/inHand/folded/pots/currentMaxBet`，保留 `dealerSeat` 以便开局轮换），随后调用现有 `startGameIfReady()` 自动发牌与设置大小盲。
    - 若未满足准备条件，调用 `sendError(socket, '尚有玩家未准备或正在观战')`。
  - 在 `nextStage()` 阶段切换完成后：
    - 设置 `turnExpireAt = Date.now() + 60000`，并确保 `broadcastState()` 发送该值。
  - `advanceTurn()` 已在切换当前行动玩家时设置倒计时与定时器；保留但在 `nextStage()` 时也重置一次，保证每轮第一说话人有倒计时。
- 客户端
  - 移除“下一阶段”按钮及其 `socket.emit('nextStage')`。
  - 新增“开启下一局”按钮（房主可见/可按）：`socket.emit('startNextHand')`；准备/观战逻辑沿用现有 `setReady` 与 `spectator` 勾选。
  - 继续使用现有 `actionError` 统一弹窗错误提示（已实现）。
  - 状态栏倒计时显示基于 `turnExpireAt`，无需更改；确保服务端每次行动/阶段变更都广播更新。

## 代码变更要点
- 删除：`server.js:292-294` 的 `nextStage` 事件；`public/index.html` 中“下一阶段”按钮与监听。
- 新增：`server.js` 中 `startNextHand` 事件实现；`public/index.html` 新按钮及监听。
- 修复倒计时：在 `server.js:188-220` 的 `nextStage()` 中设置并广播 `turnExpireAt`。

## 验证
- 两端设备加入房间：所有玩家准备后，点击“开启下一局”，自动发牌与大小盲设置；
- 每轮行动切换时，倒计时正确刷新；阶段切换后，第一说话人的倒计时从 60s 正确开始；
- 未准备时点击“开启下一局”弹窗提示错误；观战者不会参与准备校验。

## 兼容与注意
- 保持 `ledger` 只在摊牌后更新；`resetGame` 仍为房主工具，用于房间重置但不影响 `ledger`。
- 多连接/断线情况下，若房主不在仍可由其他玩家触发“开启下一局”（也可保留房主限制，按你的偏好）。

请确认该方案，我将按上述步骤实施并进行本地验证。